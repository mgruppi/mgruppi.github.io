import{T as Q}from"./components.651c9e2d.js";import{_ as V}from"./nuxt-link.2bb006d9.js";import{_ as T}from"./_plugin-vue_export-helper.c27b6911.js";import{o as t,a as s,b as e,W as _,X as h,f as q,Y as c,Z as m,$ as b,p as C,e as L,x as H,a1 as x,u as l,V as $,w as D,c as A,a6 as F}from"./entry.aa775ad5.js";import{u as k,q as S}from"./query.78c1c6e7.js";import"./utils.3b862627.js";import"./preview.abae9683.js";const z={setup(){},props:{courseId:{type:String,required:!0},schedule:{type:Array,default:[]},dateNow:{default:new Date},lastModified:{default:!1}},created(){this.computeDateObj(this.schedule)},methods:{getDateString(o){return Intl.DateTimeFormat("en-US",{day:"2-digit",month:"numeric"}).format(o)},parseDateString(o){var n=o.split(/\D/),a=new Date(n[0],n[1]-1,n[2]);return a.setHours(0,0,0),a},computeDateObj(o){for(var n=1/0,a=-1,r=0;r<o.length;++r){o[r].dateObj=this.parseDateString(o[r].date);var f=this.dateNow.getTime()-o[r].dateObj.getTime();f>=0&&(f=Math.abs(f),f<=n&&(a=r,n=f))}a>=0&&(o[a].isNext=!0)}}},O=o=>(C("data-v-a53595bb"),o=o(),L(),o),E=O(()=>e("h5",null,"Schedule",-1)),R={class:"table table-bordered w-100"},U=O(()=>e("thead",null,[e("tr",null,[e("th",{class:"d-none d-lg-table-cell idx-column"},"#"),e("th",null,"Date "),e("th",{class:"w-75"},"Description")])],-1)),W={class:"d-none d-lg-table-cell idx-column"},X={style:{"vertical-align":"middle"}},Y=["innerHTML"],Z=["href"],G={key:0,class:"text-muted"};function J(o,n,a,r,f,d){return t(),s("main",null,[E,e("table",R,[U,e("tbody",null,[(t(!0),s(_,null,h(a.schedule,(p,v)=>(t(),s("tr",{class:q({"latest-meeting":p.isNext,"alert-meeting":p.alert==="exam","no-meeting":p.alert==="no-meeting"})},[e("td",W,c(v+1),1),e("td",X,c(d.getDateString(p.dateObj)),1),e("td",null,[(t(!0),s(_,null,h(p.content,w=>(t(),s("div",null,[e("span",{class:"description-item",innerHTML:w.description},null,8,Y),(t(!0),s(_,null,h(w.links,y=>(t(),s("span",null,[m(" ["),e("a",{href:"/courses/"+a.courseId+"/"+y},c(y.substring(y.lastIndexOf("/")+1)),9,Z),m("] ")]))),256))]))),256))])],2))),256))])]),a.lastModified?(t(),s("div",G,[e("i",null,"Last modified on "+c(a.lastModified),1)])):b("",!0)])}const K=T(z,[["render",J],["__scopeId","data-v-a53595bb"]]);const i=o=>(C("data-v-e4afcd34"),o=o(),L(),o),P={key:0},ee=i(()=>e("i",{class:"fa fa-arrow-left"},null,-1)),te=i(()=>e("span",{class:"backLabel"},"Back to courses",-1)),se={key:0},ne={class:"h1"},ae=i(()=>e("hr",null,null,-1)),oe={key:0,class:"annoucements"},le={class:"alert alert-info",role:"alert"},ce=i(()=>e("i",{class:"fa fa-bullhorn"},null,-1)),de=["innerHTML"],re=F('<div class="d-lg-none" data-v-e4afcd34><ul class="nav nav-tabs" data-v-e4afcd34><li class="nav-item" data-v-e4afcd34><a data-toggle="tab" class="nav-link" aria-current="page" href="#menuInfo" data-v-e4afcd34>Info</a></li><li class="nav-item" data-v-e4afcd34><a data-toggle="tab" class="nav-link" href="#menuSchedule" data-v-e4afcd34>Schedule</a></li><li class="nav-item" data-v-e4afcd34><a data-toggle="tab" class="nav-link" href="#menuNotes" data-v-e4afcd34>Notes</a></li></ul></div>',1),ie={class:"row py-2"},ue={id:"menuInfo",class:"col-12 col-md-2"},_e={key:0},he=i(()=>e("br",null,null,-1)),me=i(()=>e("br",null,null,-1)),fe={key:0},pe=i(()=>e("hr",null,null,-1)),ve={id:"menuNotes"},ye={class:"list-unstyled"},be=["href"],ge={key:0},xe={id:"menuSchedule",class:"col-12 col-md-8"},ke={key:1,class:"alert alert-danger"},Se={key:1},we=i(()=>e("div",{class:"d-flex justify-content-center"},[e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")])],-1)),Ie=[we],$e={key:1,class:"d-flex justify-content-center"},De={class:"alert alert-danger col-12 col-lg-6"},Ne=i(()=>e("h1",{class:"h3"},"Course page not found!",-1)),Me={class:"d-flex justify-content-center"},Te=i(()=>e("button",{class:"btn btn-secondary"},[e("i",{class:"fas fa-undo"}),m(" Back to courses ")],-1)),Ce={__name:"[id]",async setup(o){let n,a;const r=H(),d=([n,a]=x(()=>k("course-meta",()=>S(`/courses/${r.params.id}/meta`).findOne())),n=await n,a(),n).data;var v=([n,a]=x(()=>k("course-schedule",()=>S(`/courses/${r.params.id}/schedule`).findOne())),n=await n,a(),n).data;const y=([n,a]=x(()=>k("course-notes",()=>S(`/courses/${r.params.id}/notes`).find())),n=await n,a(),n).data,N=([n,a]=x(()=>k("course-announcements",()=>S(`/courses/${r.params.id}/announcements`).findOne())),n=await n,a(),n).data;return(Oe,je)=>{const j=Q,M=V,B=K;return l(d)?(t(),s("div",P,[e("head",null,[$(j,null,{default:D(()=>[m(c(l(d).number)+" - "+c(l(d).name),1)]),_:1})]),$(M,{to:"/teaching",class:"btn btn-sm btn-outline-secondary mb-4"},{default:D(()=>[ee,te]),_:1}),l(d)!=null?(t(),s("div",se,[e("h1",ne,c(l(d).number)+" - "+c(l(d).name),1),e("h4",null,c(l(d).term)+" "+c(l(d).year),1),ae,l(N)?(t(),s("div",oe,[(t(!0),s(_,null,h(l(N).data,u=>(t(),s("div",le,[ce,m(" ("+c(u.date)+") ",1),e("span",{innerHTML:u.message},null,8,de)]))),256))])):b("",!0),re,e("div",ie,[e("div",ue,[l(d).sections?(t(),s("div",_e,[(t(!0),s(_,null,h(l(d).sections,u=>(t(),s("div",null,[e("b",null,"Section "+c(u.number),1),m(),he,m(" "+c(u.times)+" ",1),me,u.location?(t(),s("span",fe,c(u.location),1)):b("",!0)]))),256))])):b("",!0),pe,e("div",ve,[(t(!0),s(_,null,h(l(y),u=>(t(),s("div",null,[(t(!0),s(_,null,h(u.data,I=>(t(),s("div",null,[e("h5",null,c(I.name),1),e("ul",ye,[(t(!0),s(_,null,h(I.items,g=>(t(),s("li",null,[e("a",{href:`/content/courses/${l(d).id}/${I.path}/${g.filename}`},[m(c(g.name)+" ",1),g.date?(t(),s("span",ge,"("+c(g.date)+")",1)):b("",!0)],8,be)]))),256))])]))),256))]))),256))])]),e("div",xe,[l(v)?(t(),A(B,{key:0,courseId:l(d).id,schedule:l(v).data,lastModified:l(v).lastModified},null,8,["courseId","schedule","lastModified"])):(t(),s("div",ke," Schedule not found! "))])])])):(t(),s("div",Se,Ie))])):(t(),s("div",$e,[e("div",De,[Ne,e("div",Me,[$(M,{to:"/teaching"},{default:D(()=>[Te]),_:1})])])]))}}},ze=T(Ce,[["__scopeId","data-v-e4afcd34"]]);export{ze as default};
